<?xml version="1.0" encoding="UTF-8"?>
<article xmlns="http://www.w3.org/1999/xhtml" data-template="templates:surround" data-template-with="templates/page.html" data-template-at="content">
    <header>
        <h1>Blue Mountain Springs</h1>
    </header>
    <nav>
        <header>
            <h1>Contents</h1>
        </header>
        <ol>
            <li>
                <a href="#ov">Overview</a>
            </li>
            <li>
                <a href="#magazines">Magazines</a>
            </li>
            <li>
                <a href="#issues">Issues</a>
            </li>
            <li>
                <a href="#constituents">Constituents</a>
            </li>
            <li>
                <a href="#constituent">Constituent</a>
            </li>
            <li>
                <a href="#contributors">Contributors</a>
            </li>
            <li>
                <a href="#contributions">Contributions</a>
            </li>
        </ol>
    </nav>
    <section id="overview">
        <header>
            <h2>Overview</h2>
        </header>
        <p>Blue Mountain Springs 1.0 provides a simple model of Blue Mountain's resources:</p>
        <ul>
            <li>Blue Mountain contains a collection of <em>magazines</em>.</li>
            <li>Magazines contain <em>issues</em>.</li>
            <li>Issues contain <em>constituents</em> attributed (via <em>bylines</em>) to
                    <em>contributors</em>.</li>
        </ul>
        <aside>
            <p>Contributors are known entities (personal or corporate); bylines are strings denoting
                contributors. API users should be sure they understand this distinction.</p>
        </aside>
        <p>The root of the Blue Mountain Springs service is
            http://bluemountain.princeton.edu/exist/restxq/springs/. Local installations must define
            their own service roots.</p>
    </section>
    <section id="toplevel">
        <header>
            <h2>Top Level</h2>
        </header>
        <div class="row">
            <div class="col-md-4">
                <p>A representation of the API itself. See the <a href="http://exquery.github.io/exquery/exquery-restxq-specification/restxq-1.0-specification.html#rest-resource-functions%0A%20">RESTXQ 1.0 Specification</a> for details about the format.</p>
                <h3>Try It</h3>
                <ul>
                    <li>
                        <a href="../../restxq/springs/api">springs/api</a>
                    </li>
                </ul>
            </div>
        </div>
    </section>
    <hr/>
    <section id="magazines">
        <header>
            <h2>Magazines</h2>
        </header>
        <div class="row">
            <div class="col-md-4">
                <p>A representation of the magazines in Blue Mountain. If no bmtnid is given, the
                    service returns a representation of all the magazines. If a bmtnid is supplied,
                    it returns a representation of the corresponding magazine.</p>
                <h3>Samples</h3>
                <ul>
                    <li>
                        <a href="../../restxq/springs/magazines">springs/magazines</a>
                    </li>
                    <li>
                        <a href="../../restxq/springs/magazines/bmtnaap">springs/magazines/bmtnaap</a>
                    </li>
                </ul>
            </div>
            <div class="col-md-4">
                <h3>Request</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Accept Header</th>
                            <th>URL</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GET</td>
                            <td>text/csv</td>
                            <td>magazines/bmtnid?</td>
                        </tr>
                        <tr>
                            <td>〃</td>
                            <td>application/json</td>
                            <td>〃</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-4">
                <h3>Response by Content Type</h3>
                <p>The following tables show the format of the response to a GET, depending on the
                    value of the Accept header.</p>
                <h4>text/csv</h4>
                <p>Conforms with RFC_4180, where the record fields are as shown.</p>
                <table class="table">
                    <thead>
                        <tr>
                            <th>field</th>
                            <th>type</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>bmtnid</td>
                            <td>xs:string</td>
                        </tr>
                        <tr>
                            <td>primaryTitle</td>
                            <td>xs:string</td>
                        </tr>
                        <tr>
                            <td>primaryLanguage</td>
                            <td>a delimited string of ISO 632-2 codes</td>
                        </tr>
                        <tr>
                            <td>startDate</td>
                            <td>w3cdtf</td>
                        </tr>
                        <tr>
                            <td>endDate</td>
                            <td>w3cdtf</td>
                        </tr>
                        <tr>
                            <td>issues</td>
                            <td>xs:anyuri</td>
                        </tr>
                    </tbody>
                </table>
                <h4>application/json</h4>
                <p>A JSON object with the following properties:</p>
                <table class="table">
                    <thead>
                        <tr>
                            <th>property</th>
                            <th>type</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>bmtnid</td>
                            <td>xs:string</td>
                        </tr>
                        <tr>
                            <td>primaryTitle</td>
                            <td>xs:string</td>
                        </tr>
                        <tr>
                            <td>primaryLanguage</td>
                            <td>a delimited string of ISO 632-2 codes</td>
                        </tr>
                        <tr>
                            <td>startDate</td>
                            <td>w3cdtf</td>
                        </tr>
                        <tr>
                            <td>endDate</td>
                            <td>w3cdtf</td>
                        </tr>
                        <tr>
                            <td>issues</td>
                            <td>xs:anyuri</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <h4/>
        <p/>
    </section>
    <section id="issues">
        <header>
            <h2>Issues</h2>
        </header>
        <p>Get representations of magazine issues in Blue Mountain.</p>
        <p>If a bmtnid of a magazine title is supplied, it returns a representation of all the
            magazine's issues; if a bmtnid of an issue is supplied, the service returns a
            representation of the corresponding issue.</p>
        <table>
            <caption>Request</caption>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Accept Header</th>
                    <th>URL</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET</td>
                    <td>application/json</td>
                    <td>issues/bmtnid</td>
                </tr>
                <tr>
                    <td>〃</td>
                    <td>text/plain</td>
                    <td>〃</td>
                </tr>
                <tr>
                    <td>〃</td>
                    <td>application/tei+xml</td>
                    <td>〃</td>
                </tr>
                <tr>
                    <td>〃</td>
                    <td>application/rdf+xml</td>
                    <td>〃</td>
                </tr>
            </tbody>
        </table>
    </section>
    <section id="constituents">
        <header>
            <h2>Constituents</h2>
        </header>
        <p>Get representations of constituents of a single issue in Blue Mountain.</p>
        <table>
            <caption>Request</caption>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Accept Header</th>
                    <th>URL</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET</td>
                    <td>application/json</td>
                    <td>constituents/issueid</td>
                </tr>
            </tbody>
        </table>
    </section>
    <section id="constituent">
        <header>
            <h2>Constituent</h2>
        </header>
        <p>Get a representation of an individual constituent in an issue in Blue Mountain.</p>
        <table>
            <caption>Request</caption>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Accept Header</th>
                    <th>URL</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET</td>
                    <td>text/plain</td>
                    <td>constituent/issueid/constid</td>
                </tr>
                <tr>
                    <td>〃</td>
                    <td>application/tei+xml</td>
                    <td>〃</td>
                </tr>
            </tbody>
        </table>
    </section>
    <section id="contributors">
        <header>
            <h2>Contributors</h2>
        </header>
        <p>Get representations of contributors to magazines or issues in Blue Mountain. If bmtnid is
            that of an issue, returns a representation of all the contributors to that issue; if
            bmtnid is that of a magazine, returns a representation of all contributors to the
            magazine in all issues.</p>
        <table>
            <caption>Request</caption>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Accept Header</th>
                    <th>URL</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET</td>
                    <td>text/csv</td>
                    <td>contributors/bmtnid</td>
                </tr>
                <tr>
                    <td>〃</td>
                    <td>application/json</td>
                    <td>〃</td>
                </tr>
            </tbody>
        </table>
    </section>
    <section id="contributions">
        <header>
            <h2>Contributions</h2>
        </header>
        <p>Get representation of contributions to a magazine having a particular byline. If the
            request is for CSV, returns a table of values; if the request is for TEI, returns a TEI
            Corpus.</p>
        <table>
            <caption>Request</caption>
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Accept Header</th>
                    <th>URL</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GET</td>
                    <td>text/csv</td>
                    <td>contributions?byline=</td>
                </tr>
                <tr>
                    <td>〃</td>
                    <td>application/tei+xml</td>
                    <td>〃</td>
                </tr>
            </tbody>
        </table>
    </section>
    <section>
        <header>
            <h2>IIIF Presentation API</h2>
        </header>
        <div class="resource">
            <header>
                <h3>iiif/collection/top</h3>
                <p>Set of Blue Mountain magazine titles as a IIIF collection</p>
            </header>
        </div>
        <div class="resource">
            <header>
                <h3>iiif/collection/{bmtnid}</h3>
            </header>
        </div>
        <div class="resource">
            <header>
                <h3>iiif/{$issueid}/manifest</h3>
                <p>IIIF manifest for an issue</p>
            </header>
            <dl>
                <dt>application/json</dt>
                <dd>Returns a IIIF manifest.</dd>
            </dl>
            <p>Try it:</p>
            <a href="../../restxq/iiif/bmtnaap_1921-11_01/manifest">restxq/iiif/bmtnaap_1921-11_01/manifest</a>
        </div>
    </section>
</article>